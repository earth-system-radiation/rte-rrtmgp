sudo: required
dist: xenial
language: cpp
matrix:
  include:
  - compiler: gcc
    env:
    - FC=pgfortran
    - FCFLAGS="-Mallocatable=03 -Mstandard"
    - INSTALL_PGI=on
  - compiler: gcc
    env:
    - FC=gfortran-9
    - FCFLAGS="-ffree-line-length-none -m64 -std=f2003 -march=native"
    addons:
      apt:
        sources:
          - ubuntu-toolchain-r-test
        packages:
          - gcc-9
          - gfortran-9
  - compiler: gcc
    env:
    - FC=gfortran-8
    - FCFLAGS="-ffree-line-length-none -m64 -std=f2003 -march=native"
    addons:
      apt:
        sources:
          - ubuntu-toolchain-r-test
        packages:
          - gcc-8
          - gfortran-8
cache:
    directories:
     - "$HOME/pgi/"
before_install:
- if [ ! -d "$HOME/pgi" ]; wget -q 'https://raw.githubusercontent.com/nemequ/pgi-travis/master/install-pgi.sh'; fi
- if [ ! -d "$HOME/pgi" ]; chmod +x install-pgi.sh; fi
- if [ ! -d "$HOME/pgi" ]; ./install-pgi.sh --nvidia; fi
- pgfortran --version
script:
- cd build
- make
notifications:
  email:
    on_success: never
    on_failure: never
