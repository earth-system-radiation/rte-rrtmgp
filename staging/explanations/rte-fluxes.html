<p>RTE solves the radiative transfer equation for each spectral point independently but this detailed information typically isn’t useful. Class <code class="language-plaintext highlighter-rouge">ty_fluxes</code> in module <a href="../reference/rte-fortran-interface/module/mo_fluxes.html">mo_fluxes</a> in the RTE library provides a way to reduce the highly-detailed information based on precisely what the user needs. Class <code class="language-plaintext highlighter-rouge">ty_fluxes_broadband</code> provides an example implementation that reports broadband flux i.e. the sum over all spectral points at all levels.</p>

<h1 id="fluxes-interface">Fluxes interface</h1>

<p><code class="language-plaintext highlighter-rouge">[ty_fluxes](https://earth-system-radiation.github.io/rte-rrtmgp/reference/rte-fortran-interface/type/ty_fluxes.html)</code> is an abstract class that defines <a href="../reference/rte-fortran-interface/type/ty_fluxes.html">two interfaces</a> defining type-bound functions. Function <code class="language-plaintext highlighter-rouge">reduce()</code> is called within the RTE solvers. The input arguments include the spectrally-resolved fluxes up and down (and, optically, the direct-beam flux) and the spectral discretization. Logical function <code class="language-plaintext highlighter-rouge">are_desired()</code> is called by RTE to check if the results of a calculation will be used.</p>

<p>Class <code class="language-plaintext highlighter-rouge">ty_fluxes</code> is abstract; it defines only the interfaces to these routines. Implementation is deferred to user classes that extend this class.</p>

<h1 id="broadband-fluxes">Broadband fluxes</h1>

<p>Class <a href="../reference/rte-fortran-interface/type/ty_fluxes_broadband.html">ty_fluxes_broadband</a> in the same <a href="../reference/rte-fortran-interface/module/mo_fluxes.html">module</a> provides an example of how to extend <code class="language-plaintext highlighter-rouge">ty_fluxes</code>. This class reports broadband values i.e. the sum over every element in the spectral dimensions. The class contains <a href="../reference/rte-fortran-interface/type/ty_fluxes_broadband.html">four data fields</a>. Before calling one of the RTE solvers with this class as output, users either allocate one or more of these output fields or point to an existing array. The fields must have the same number of columns and layers as the problem being solved. In class <code class="language-plaintext highlighter-rouge">ty_fluxes_broadband</code> logical function `are_desired()`` returns true if one or more of the data fields points to storage and false otherwise.</p>

<h1 id="other-extensions">Other extensions</h1>

<p>Class <code class="language-plaintext highlighter-rouge">ty_fluxes_byband</code> in subdirectory <code class="language-plaintext highlighter-rouge">extensions/</code> provides another example that makes use of the spectral discretization information.</p>

<p>It’s useful to extend the class when particular subsets of fluxes, such as photosynthetically-active radiation at the surface, are required.</p>
