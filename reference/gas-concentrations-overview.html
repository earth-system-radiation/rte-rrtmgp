<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Working with gas concentrations | RTE-RRTMGP</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Working with gas concentrations" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="RTE+RRTMGP is a set of codes for computing radiative fluxes in planetary atmospheres. RRTMGP uses a k-distribution to provide an optical description (absorption and possibly Rayleigh optical depth) of the gaseous atmosphere, along with the relevant source functions, on a pre-determined spectral grid given temperatures, pressures, and gas concentration. RTE computes fluxes given spectrally-resolved optical descriptions and source functions." />
<meta property="og:description" content="RTE+RRTMGP is a set of codes for computing radiative fluxes in planetary atmospheres. RRTMGP uses a k-distribution to provide an optical description (absorption and possibly Rayleigh optical depth) of the gaseous atmosphere, along with the relevant source functions, on a pre-determined spectral grid given temperatures, pressures, and gas concentration. RTE computes fluxes given spectrally-resolved optical descriptions and source functions." />
<link rel="canonical" href="https://earth-system-radiation.github.io//rte-rrtmgp/reference/gas-concentrations-overview.html" />
<meta property="og:url" content="https://earth-system-radiation.github.io//rte-rrtmgp/reference/gas-concentrations-overview.html" />
<meta property="og:site_name" content="RTE-RRTMGP" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Working with gas concentrations" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"RTE+RRTMGP is a set of codes for computing radiative fluxes in planetary atmospheres. RRTMGP uses a k-distribution to provide an optical description (absorption and possibly Rayleigh optical depth) of the gaseous atmosphere, along with the relevant source functions, on a pre-determined spectral grid given temperatures, pressures, and gas concentration. RTE computes fluxes given spectrally-resolved optical descriptions and source functions.","headline":"Working with gas concentrations","url":"https://earth-system-radiation.github.io//rte-rrtmgp/reference/gas-concentrations-overview.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/rte-rrtmgp/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://earth-system-radiation.github.io//rte-rrtmgp/feed.xml" title="RTE-RRTMGP" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/rte-rrtmgp/">RTE-RRTMGP</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/rte-rrtmgp/explanations/">Explanations</a><a class="page-link" href="/rte-rrtmgp/how-tos/">How-to guides</a><a class="page-link" href="/rte-rrtmgp/reference/">Conventions, technical documentation</a><a class="page-link" href="/rte-rrtmgp/tutorials/">Tutorials</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Working with gas concentrations</h1>
  </header>

  <div class="post-content">
    <p>Class ty_gas_concs from module mo_gas_concentrations in the RRTMGP library is the means for specifying gas concentrations to ty_gas_optics%gas_optics. The class has four user-facing procedures. The following examples assume the declaration <code class="language-plaintext highlighter-rouge">type(ty_gas_concs) :: gas_concs</code></p>

<p><code class="language-plaintext highlighter-rouge">err_msg = gas_optics%init(gas_names)</code> takes a vector of strings specifying the names of the gases that will be provided. Gas names are normally the chemical formula. Some compilers expect each string to be the same length, so shorter names may have to be padded with trailing spaces.</p>

<p><code class="language-plaintext highlighter-rouge">err_msg = gas_optics%init(gas_name, value)</code>specifies the absolute volume mixing ratio for the named gas. Gas names are normally the chemical formula. Values may be specified as scalars, one-dimensional profiles assumed to apply layer-by-layer to all columns, or as a 2D field dimensioned (columns, layers). The number of columns is set the first time a 1D or 2D field is supplied; the number columns is determined from the first 2D field. Specifying a concentration for a gas not provided during initialization is an error.</p>

<p><code class="language-plaintext highlighter-rouge">err_msg = gas_concs%get_subset(2, n, gas_conc_subset)</code> extracts columns start to start+n-1 from the class. Example:</p>

<p><code class="language-plaintext highlighter-rouge">call gas_concs%reset()`` will return variable </code>gas_concs` to an un-initialized state. This is useful if, for example, the problem size has changed since concentrations were last specified.</p>

<p><code class="language-plaintext highlighter-rouge">gas_concs%get_vmr()</code> is used within <code class="language-plaintext highlighter-rouge">ty_gas_optics%gas_optics()</code> to extract the gas concentrations. Asking for the vmr of a gas that wasn’t provided during <code class="language-plaintext highlighter-rouge">init()</code> or hasn’t been set through a call to <code class="language-plaintext highlighter-rouge">set_vmr()</code> is an error.</p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/rte-rrtmgp/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">RTE-RRTMGP</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">RTE-RRTMGP</li><li><a class="u-email" href="mailto:rrtmgp@aer.com">rrtmgp@aer.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/earth-system-radiation"><svg class="svg-icon"><use xlink:href="/rte-rrtmgp/assets/minima-social-icons.svg#github"></use></svg> <span class="username">earth-system-radiation</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>RTE+RRTMGP is a set of codes for computing radiative fluxes in planetary atmospheres. RRTMGP uses a k-distribution to provide an optical description (absorption and possibly Rayleigh optical depth) of the gaseous atmosphere, along with the relevant source functions, on a pre-determined spectral grid given temperatures, pressures, and gas concentration. RTE computes fluxes given spectrally-resolved optical descriptions and source functions.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
